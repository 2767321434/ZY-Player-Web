(function(e){function t(t){for(var n,s,c=t[0],o=t[1],u=t[2],h=0,p=[];h<c.length;h++)s=c[h],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);l&&l(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,c=1;c<r.length;c++){var o=r[c];0!==a[o]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},i=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=o;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"header"},[n("KPCButton",{attrs:{icon:"",circle:""},on:{click:e.historyBtnEvent}},[n("KPCIcon",{staticClass:"ion-ios-clock-outline"})],1),n("KPCButton",{attrs:{icon:"",circle:""},on:{click:e.starBtnEvent}},[n("KPCIcon",{staticClass:"ion-ios-heart-outline"})],1),n("KPCButton",{attrs:{icon:"",circle:""},on:{click:e.settingBtnEvent}},[n("KPCIcon",{staticClass:"ion-ios-gear"})],1)],1),n("div",{staticClass:"body"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.show.player,expression:"!show.player"}],staticClass:"input"},[n("KPCInput",{attrs:{placeholder:"请输入 M3U8 格式的播放链接...",clearable:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterEvent(t)}},model:{value:e.vUrl,callback:function(t){e.vUrl=t},expression:"vUrl"}},[n("template",{slot:"append"},[n("KPCButton",{attrs:{icon:"",type:"none"},on:{click:e.enterEvent}},[n("KPCIcon",{staticClass:"ion-play"})],1)],1)],2)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.show.player,expression:"show.player"}],staticClass:"box"},[n("div",{staticClass:"xgplayer",attrs:{id:"xgplayer"}})])]),n("KPCDrawer",{ref:"history",attrs:{title:"播放记录"},model:{value:e.show.history,callback:function(t){e.$set(e.show,"history",t)},expression:"show.history"}},[n("div",{staticClass:"history-header"},[n("KPCButton",{attrs:{type:"warning"},on:{click:function(t){return e.historyClear()}}},[e._v("清空播放记录")])],1),n("div",{staticClass:"history-body"},[n("ul",e._l(e.list.history,(function(t,r){return n("li",{key:r,on:{click:function(r){return e.historyItemClick(t)}}},[n("span",[e._v(e._s(t.name))]),n("span",[e._v(e._s(t.date))])])})),0)])]),n("KPCDrawer",{ref:"star",attrs:{title:"收藏夹"},model:{value:e.show.star,callback:function(t){e.$set(e.show,"star",t)},expression:"show.star"}},[n("div",{staticClass:"star-header"},[n("KPCButton",{attrs:{type:"warning"},on:{click:function(t){return e.starClear()}}},[e._v("清空收藏夹")])],1),n("div",{staticClass:"star-body"},[n("ul",e._l(e.list.star,(function(t,r){return n("li",{key:r,on:{click:function(r){return e.starItemClick(t)}}},[n("span",[e._v(e._s(t.name))]),n("span",[e._v(e._s(t.date))])])})),0)])]),n("KPCDrawer",{ref:"setting",attrs:{title:"设置"},model:{value:e.show.setting,callback:function(t){e.$set(e.show,"setting",t)},expression:"show.setting"}},[n("div",{staticClass:"setting-body"},[n("div",{staticClass:"logo"},[n("img",{attrs:{src:r("cf05"),alt:""}}),n("h2",[e._v("ZY Player Web")]),n("p",[n("a",{attrs:{href:"https://github.com/Hunlongyu/ZY-Player-Web",target:"_blank"}},[e._v("Github")]),n("a",{attrs:{href:"https://github.com/Hunlongyu/ZY-Player-Web/issues",target:"_blank"}},[e._v("反馈")]),n("a",{attrs:{href:"https://github.com/Hunlongyu/ZY-Player",target:"_blank"}},[e._v("电脑端")]),n("a",{attrs:{href:"https://github.com/Hunlongyu/ZY-Player-APP",target:"_blank"}},[e._v("手机端")])])]),n("div",{staticClass:"setting-item"},[e._v("记录播放历史："),n("KSwitch",{attrs:{on:"开启",off:"关闭",width:"70"},on:{click:e.hsChange},model:{value:e.historySwitch,callback:function(t){e.historySwitch=t},expression:"historySwitch"}})],1),n("div",{staticClass:"setting-item"},[e._v("所有资源来自网上, 该软件不参与任何制作, 上传等内容. 该软件仅供学习参考, 请于安装后24小时内删除.")])])])],1)},i=[],s=(r("7db0"),r("c975"),r("b0c0"),r("4d63"),r("ac1f"),r("25f0"),r("466d"),r("841c"),r("b85c")),c=r("5530"),o=(r("96cf"),r("1da1")),u=r("5336"),l=r("c7c2"),h=r("6e0b"),p=r("63cb"),f=r("9d2f"),d=r("d6f9"),v=r("5392"),g=r.n(v),m=r("9000"),w=r.n(m),y=r("d4ec"),b=r("bee2"),x=r("4dec"),k=new x["a"]("ZYPlayerWeb");k.version(1).stores({setting:"id, theme, volume",star:"++id, name, url, date",history:"++id, name, url, date, time"});var R=[{id:0,theme:"light",history:!0}];k.on("populate",(function(){k.setting.bulkAdd(R)})),k.open();var C=function(){function e(){Object(y["a"])(this,e)}return Object(b["a"])(e,[{key:"add",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.history.add(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"find",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.history.where(t).first();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.history.update(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"all",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.history.toArray();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"remove",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.history.delete(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"clear",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.history.clear();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),O=function(){function e(){Object(y["a"])(this,e)}return Object(b["a"])(e,[{key:"add",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.star.add(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"find",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.star.where(t).first();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.star.update(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"all",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.star.toArray();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"remove",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.star.delete(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"clear",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.star.clear();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),j=function(){function e(){Object(y["a"])(this,e)}return Object(b["a"])(e,[{key:"find",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.setting.get({id:0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.setting.update(0,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),P=new C,S=new O,_=new j,U={name:"App",data:function(){return{vUrl:"",vName:"",show:{history:!1,star:!1,setting:!1,player:!1},list:{history:[],star:[]},setting:{},xg:null,config:{id:"xgplayer",url:"",lang:"zh-cn",width:"100%",height:"100%",autoplay:!1,videoInit:!0,screenShot:!0,keyShortcut:"on",crossOrigin:!0,defaultPlaybackRate:1,playbackRate:[.25,.5,.75,1,1.25,1.5,1.75,2,3,4,5],airplay:!1},timer:null,historySwitch:!1}},components:{KPCButton:u["a"],KPCIcon:h["a"],KPCDrawer:l["a"],KPCInput:p["a"],KSwitch:d["a"]},methods:{getParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),r=window.location.search.substr(1).match(t);return null!==r?decodeURI(r[2]):null},getInfo:function(){this.vUrl=this.getParam("url"),this.vName=this.getParam("name"),this.vUrl&&this.playUrl(this.vUrl)},playUrl:function(){if(-1!==this.vUrl.indexOf("m3u8"))return this.config.url=this.vUrl,this.show.player=!0,this.xg=new w.a(this.config),this.addStarBtn(),this.videoPlaying(),!1;f["a"].warning("输入的链接格式有问题， 请确认后重试。")},videoPlaying:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.checkStar(),t.next=3,_.find();case 3:if(r=t.sent,r.history){t.next=6;break}return t.abrupt("return",!1);case 6:return t.next=8,P.find({url:e.vUrl});case 8:n=t.sent,a={name:e.vName,url:e.vUrl,date:(new Date).toLocaleString(),time:0},n?(e.xg.currentTime=n.time,P.update(n.id,a)):P.add(a),e.timerEvent();case 12:case"end":return t.stop()}}),t)})))()},timerEvent:function(){var e=this;this.timer=setInterval(Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.find({url:e.vUrl});case 2:if(r=t.sent,!r){t.next=10;break}return n=Object(c["a"])({},r),n.time=e.xg.currentTime,n.date=(new Date).toLocaleString(),delete n.id,t.next=10,P.update(r.id,n);case 10:case"end":return t.stop()}}),t)}))),5e3)},historyBtnEvent:function(){this.show.history=!this.show.history,this.getHistory()},starBtnEvent:function(){this.show.star=!this.show.star,this.getStar()},settingBtnEvent:function(){this.show.setting=!this.show.setting},getSetting:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_.find();case 2:r=t.sent,e.setting=r,e.historySwitch=r.history;case 5:case"end":return t.stop()}}),t)})))()},getStar:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,S.all();case 2:r=t.sent,e.list.star=r.reverse();case 4:case"end":return t.stop()}}),t)})))()},getHistory:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.all();case 2:r=t.sent,e.list.history=r;case 4:case"end":return t.stop()}}),t)})))()},addStar:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={name:e.vName,url:e.vUrl,date:(new Date).toLocaleString()},t.next=3,S.add(r);case 3:n=t.sent,console.log(n,"add star res");case 5:case"end":return t.stop()}}),t)})))()},checkStar:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,S.find({url:e.vUrl});case 2:r=t.sent,n=document.querySelector(".xgplayer-star"),r?(a=n.classList.contains("active"),a||n.classList.add("active")):(i=n.classList.contains("active"),i&&n.classList.remove("active"));case 5:case"end":return t.stop()}}),t)})))()},starEvent:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,S.find({url:e.vUrl});case 2:if(r=t.sent,!r){t.next=9;break}return t.next=6,S.remove(r.id);case 6:f["a"].success("移除收藏成功。"),t.next=12;break;case 9:return t.next=11,S.add({name:e.vName,url:e.vUrl,date:(new Date).toLocaleString()});case 11:f["a"].success("添加收藏成功。");case 12:n=document.querySelector(".xgplayer-star"),n.classList.toggle("active");case 14:case"end":return t.stop()}}),t)})))()},addStarBtn:function(){var e=this;this.xg.on("ready",(function(){var t,r=document.querySelector(".xgplayer-controls").childNodes,n=Object(s["a"])(r);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=a.classList.contains("xgplayer-star");if(i)return!1}}catch(h){n.e(h)}finally{n.f()}var c=e.xg.controls,o=g.a.util,u='<svg t="1606442580426" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3119" width="21" height="21"><path d="M755.2 64c-107.616 0-200.256 87.552-243.168 179.008C469.088 151.552 376.448 64 268.8 64 120.416 64 0 184.448 0 332.832c0 301.856 304.512 380.992 512.032 679.424C708.192 715.68 1024 625.056 1024 332.832 1024 184.448 903.584 64 755.2 64z" p-id="3120" fill="#ffffff"></path></svg>',l=o.createDom("xg-star",u,{title:"收藏"},"xgplayer-star");c.appendChild(l),l.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.starEvent()})),e.checkStar()}))},starClear:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,S.clear();case 2:f["a"].success("清空收藏夹成功。"),e.getStar();case 4:case"end":return t.stop()}}),t)})))()},starItemClick:function(e){this.vUrl=e.url,this.vName=e.name,this.xg&&this.xg.hasStart?this.xg.src=e.url:this.xg.start(e.url),document.title=e.name,this.show.star=!1,this.videoPlaying()},historyClear:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.clear();case 2:f["a"].success("清空收藏夹成功。"),e.getHistory();case 4:case"end":return t.stop()}}),t)})))()},historyItemClick:function(e){this.vUrl=e.url,this.vName=e.name,this.xg&&this.xg.hasStart?this.xg.src=e.url:this.xg.start(e.url),document.title=e.name,this.show.history=!1,this.videoPlaying()},hsChange:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_.find();case 2:r=t.sent,n=Object(c["a"])({},r),n.history=e.historySwitch,_.update(n);case 6:case"end":return t.stop()}}),t)})))()},enterEvent:function(){this.vUrl?(this.vName="未知资源"+(new Date).getTime(),this.playUrl()):f["a"].warning("请输入 M3U8 格式的播放链接。")}},mounted:function(){this.getSetting(),this.getInfo()}},K=U,E=(r("5c0b"),r("2877")),B=Object(E["a"])(K,a,i,!1,null,null,null),I=B.exports,N=r("9483");Object(N["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(I)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";r("9c0c")},"9c0c":function(e,t,r){},cf05:function(e,t,r){e.exports=r.p+"img/logo.3535fb1b.png"}});